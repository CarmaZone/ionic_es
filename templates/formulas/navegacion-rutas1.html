<article class='margen'>
    <header>
        <h1>Construir una aplicación con navegación y rutas (Parte 1)</h1>
        <div class='byline'>
            <span class='author'>
                Escrito por
                <a href='https://twitter.com/justicefries' target='_new'>Gerred Dillon</a>
            </span>
            <time></time>
        </div>
    </header>
    <br>
    <p>Este es el comienzo de una serie de varios capítulos sobre navegación y el enrutamiento. Vamos a empezar de forma sencilla, mediante la creación de una aplicación simple que puede cambiar entre pestañas. A medida que avanzemos, profundizaremos en las características de una aplicación de "lista de tareas" y mostraremos algunas de las características avanzadas que las rutas de ionic nos ofrece.</p>

    <p>Podrá ver un ejemplo al final del artículo.</p>

    <h2 id="the-need-for-routing">La necesidad del enrutamiento</h2>

    <p>Cuando una aplicación es pequeña, es fácil seguir el estado de las cosas.</p>

    <p>Pero a medida que se hace más grande y compleja, ésto se vuelve más difícil. ¿De dónde vienen mis variables? ¿Qué plantilla debo mostrar? ¿Desde dónde estoy mostrando esta plantilla? ¿Cómo anido esta vista de detalles? ¿Qué ocurre si ésto en una vista de detalles, cambio entre pestañas y vuelvo atrás?</p>

    <p>Muchas de estas preguntas empiezan a surgir, y empezamos a repetir código para solvertar estos problemas. De hecho, acabamos creando nuestra propia máquina de estados. Aquí es donde la navegación con Ionic y angular-ui-router entran en juego para solventar nuestras dudas.</p>

    <h2 id="getting-started">Empezando</h2>

    <p>Para empezar, vamos a crear la aplicación más sencilla posible: mostrar una sola vista utilizando el enrutado de Ionic. Desde allí extenderemos la capa añadiendo más y más características hasta conseguir una aplicación completa.</p>

    <p>Mostrar una única vista es tan simple como usar el siguiente HTML:</p>

    <div>
        <pre><code ng-prism class="language-markup">&lt;!DOCTYPE html>
&lt;html ng-app="ionicApp">

  &lt;head>
    &lt;link data-require="ionic@1.0.0-beta6" data-semver="1.0.0-beta6" rel="stylesheet" href="http://code.ionicframework.com/1.0.0-beta.6/css/ionic.css" />
    &lt;script data-require="ionic@1.0.0-beta6" data-semver="1.0.0-beta6" src="http://code.ionicframework.com/1.0.0-beta.6/js/ionic.bundle.js">&lt;/script>
    &lt;link rel="stylesheet" href="style.css" />
    &lt;script src="script.js">&lt;/script>
  &lt;/head>

  &lt;body>
    &lt;ion-nav-view>&lt;/ion-nav-view>
  &lt;/body>
&lt;/html></code></pre>
    </div>

    <p>Las etiqueta
        <code>ion-nav-view</code>es nuestro controlador. El enrutamiendo de Ionic buscará esta directiva todo el tiempo en nuestro código para insertar plantillas.
        <code>ion-nav-view</code> soporta herencia, nombres de vistas y otras caracteríasticas de las que hablaremos a lo largo de esta serie.</p>

    <blockquote class="note">
        <p>
            <strong>Nota:</strong>si estás familiarizado con
            <code>angular-ui-router</code>,
            <code>ion-nav-view</code>es equivalente a
            <code>ui-view</code>. Además,
            <code>ion-nav-view</code> soporta animaciones, históticos y más.</p>
    </blockquote>

    <p>Manejar el HTML es ligeramente más interesante:</p>

    <div>
        <pre><code ng-prism class="language-javascript">var app = angular.module('ionicApp', ['ionic'])

app.config(function($stateProvider, $urlRouterProvider) {
  $urlRouterProvider.otherwise('/')

  $stateProvider.state('home', {
    url: '/',
    template: '<p>Hello, world!</p>'
  })
})</code></pre>
    </div>

    <p>Para empezar, configuraremos una aplicación estándar de Angular. En nuestro bloque de configuración inyectaremos
        <code>$stateProvider</code>y
        <code>$urlRouterProvider</code>. Éstas directivas nos proporcionan lo necesario para configurar los estados de nuestra aplicación.</p>

    <p>Dentro del bloque de configuración podemos empezar a declarar nuestros estados. Aquí se puede ver como declaramos uno y se asignamos una plantilla. Cuando se ejecute, la plantilla se inyectará donde hayamos colocado la etiqueta 
        <code>ion-nav-view</code> de nuestra plantilla principal.</p>

    <p>We can also use outside templates to keep markup out of our code.</p>

    <div>
        <pre><code ng-prism class="language-javascript">$stateProvider.state('home', {
  url: '/',
  templateUrl: 'home.html'
})</code></pre>
    </div>

    <p>Changing the state declaration to use
        <code>templateUrl</code>will cause Angular to look inside of
        <code>$templateCache</code>for the template. If it’s not in the cache, it will request it from the server and place it in the cache.</p>

    <blockquote class="note">
        <p>
            <strong>Note:</strong>In the Scratchpad below, we use script tags with the type
            <code>text/ng-template</code>and an id of the page name. This will add the template to the template cache, and save us the request.</p>
    </blockquote>

    <h2 id="adding-some-navigation">Adding some navigation</h2>

    <p>Driving our states through the router isn’t very useful when there’s only one state. Let’s modify our template to use tabs:</p>

    <div>
        <pre><code ng-prism class="language-markup">&lt;body>
  &lt;ion-tabs class="tabs-positive">
    &lt;ion-tab icon="ion-home" ui-sref="home">
      &lt;ion-nav-view name="home">&lt;/ion-nav-view>
    &lt;/ion-tab>
    &lt;ion-tab icon="ion-help" ui-sref="help">
      &lt;ion-nav-view name="help">&lt;/ion-nav-view>
    &lt;/ion-tab>
  &lt;/ion-tabs>
&lt;/body></code></pre>
    </div>

    <p>Whoa, a lot changed! Let’s break it down.</p>

    <p>To start, all we’ve done is changed our app to use Ionic’s
        <code>ion-tabs</code>directive. If you’re not familiar with it, <a href="http://ionicframework.com/docs/api/directive/ionTabs/">check out the documentation on tabs</a>.</p>

    <p>Our
        <code>ion-nav-view</code>directives have moved inside of our tab directive. There’s two things to notice here. First, we have added a
        <code>name</code>attribute to
        <code>ion-nav-view</code>. Now that there is more than one
        <code>ion-nav-view</code>in our template at the same level in the heirarchy, we have to name our views. Without this, the router won’t be able to correctly determine the proper place to insert the template, causing events to mis-fire and bugs to appear through the app.</p>

    <p>Second, the tab itself has a
        <code>ui-sref</code>directive. This is like an
        <code>href</code>on anchors, but specifies the state we want to transition to. But to transition to another state, we need to add one! Here’s the code:</p>

    <div>
        <pre><code ng-prism class="language-javascript">$stateProvider.state('home', {
  url: '/home',
  views: {
    home: {
      templateUrl: 'home.html'
    }
  }
})

$stateProvider.state('help', {
  url: '/help',
  views: {
    help: {
      templateUrl: 'help.html'
    }
  }
})</code></pre>
    </div>

    <p>Named views change our state declaration slightly. We add a
        <code>views</code>key, which is an object of all of our sub-views. Within those is an object that takes the same parameters we would use when otherwise declaring a state. More information on named views <a href="https://github.com/angular-ui/ui-router/wiki/Multiple-Named-Views">is available in the angular-ui-router docs</a>.</p>

    <p>Let’s not forget about our templates. Add these in at the end of the
        <code>body</code>:</p>

    <div>
        <pre><code ng-prism class="language-markup">&lt;script type="text/ng-template" id="home.html">
  &lt;ion-view title="Home">
    &lt;ion-content padding="true">
      &lt;h2>Home Page&lt;/h2>
      &lt;p>Here's the main route for the app.&lt;/p>
    &lt;/ion-content>
  &lt;/ion-view>
&lt;/script>

&lt;script type="text/ng-template" id="help.html">
  &lt;ion-view title="Home">
    &lt;ion-content padding="true">
       &lt;h2>Using the app&lt;/h2>
       &lt;p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Facilis architecto hic officia quasi excepturi sequi deleniti maiores consectetur veritatis sint?&lt;/p>
    &lt;/ion-content>
  &lt;/ion-view>
&lt;/script></code></pre>
    </div>

    <p>At this point, we have a simple app that we can tab through. It would be nice to have a header bar that is aware of our navigation stack, and could update its header accordingly. Let’s add that.</p>

    <h2 id="adding-a-header">Adding a Header</h2>

    <p>Putting a header bar on is easy. Add the following before the
        <code>ion-tabs</code>directive:</p>

    <div>
        <pre><code ng-prism class="language-markup">&lt;ion-nav-bar class="bar-positive">
&lt;/ion-nav-bar></code></pre>
    </div>

    <p>Now when we run, we can see the header bar at the top of the screen, with correct titles. These titles are being driven by the
        <code>title</code>attribute of
        <code>ion-view</code>.</p>

    <h2 id="conclusion">Conclusion</h2>

    <p>We now have a basic app whose views are driven by a centralized state machine. In Part 2 of this formula, we will begin to add dynamic content to our views, as well as creating a list - detail hierarchy you can use in your app’s navigation. Stay tuned!</p>
    <section class='scratchpad'>
        <p>Try this tutorial out below in the Scratchpad:</p>
        <div id='scratch'></div>
    </section>
</article>
